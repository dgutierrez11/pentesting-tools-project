from cwe import Database
from datetime import datetime
from persistence.postgres_bd import ConnectionPostgres

db = Database()

list_records = []
index = 1
for k, v in db.get_top_25().items():
    alert = v.get('Description')
    descriptionAlert = v.get('Description')
    nameAlert = v.get('Name')
    record = (index, nameAlert, alert[0:49], 'High',
              descriptionAlert[0:2000], v.get('CWE-ID'), datetime.now())
    list_records.append(record)
    index = index + 1
    print(record)

cp = ConnectionPostgres()
cp.add_all_record(list_records)

#if k == '79':
# print(type(v))
# print(v)
# record = (index, v.get('Name'), 'alert', 'High',
#   v.get('Description'), v.get('CWE-ID'), datetime.now()), v.get('Alternate Terms'), v.get(
# 'Modes Of Introduction')
# list_records.append(record)
# print(record)
# keys = v.keys()
# print(keys)
